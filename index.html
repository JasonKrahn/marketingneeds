<html lang="en">
    <head>
        <meta charset="utf-8">
    </head>
    <body>
        <H2>Enter the Values</H2>
        
        
            <form>
                <H3>How would you rate the current level of  of your brand/business with your target market?</H3>
                <input id="s1" type="radio" name="awareness" value="10"/><label for="s1">10</label>
                <input id="s2" type="radio" name="awareness" value="20" /><label for="s2">20</label>
                <input id="s3" type="radio" name="awareness" value="30" /><label for="s3">30</label>
                <input id="s4" type="radio" name="awareness" value="40"/><label for="s4">10</label>
                <input id="s5" type="radio" name="awareness" value="50" /><label for="s5">20</label>
                <input id="s6" type="radio" name="awareness" value="60" /><label for="s6">30</label>
                <input id="s7" type="radio" name="awareness" value="70"/><label for="s7">10</label>
                <input id="s8" type="radio" name="awareness" value="80" /><label for="s8">20</label>
                <input id="s9" type="radio" name="awareness" value="90" /><label for="s9">30</label>
                <input id="s10" type="radio" name="awareness" value="100" /><label for="s10">30</label>
                <button type="submit">Submit that shit</button>
            </form>
            
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js"></script>
        <h1>
            <div style= "background-image: url('chart.png'); background-repeat: no-repeat; background-size: auto; width: 800px; height: 800px;">
                <canvas id="radarchart" height="800" width="800" style="display: block; height: 800px; width: 800px;">
            </div>
        </h1>
        <script>
            // Select all of the radio options for "Awareness"
            const awarenessChoices = document.querySelectorAll(`[name="awareness"]`);
            // Assign an initial value to the "Awareness" score. If a radio option is selected it will use this value otherwise it will be 0.
            let awareness = document.querySelector(`[name="awareness"]:checked`) ? parseInt(document.querySelector(`[name="awareness"]:checked`).value) : 0;    
            
            var ctx = document.getElementById("radarchart");
            var data = {
                labels: ['', '', '', '', '', '', '', '', '', '', '', '', '', '', ''],
                datasets: [{
                    label: "Marketing Status",
                    backgroundColor: "rgba(179,181,198,0.2)",
                    borderColor: "#000",
                    pointBackgroundColor: "rgba(100%, 0%, 0%, 1)",
                    pointBorderColor: "#fff",
                    pointHoverBackgroundColor: "#3385FF",
                    pointHoverBorderColor: "#3385FF",
                    data: [
                        `${awareness}`, // Initialize the value at the currently selected option on page load.
                        45, 
                        25, 
                        90, 
                        60, 
                        55, 
                        50, 
                        50, 
                        50,
                        12,
                        60,
                        45,
                        10,
                        5,
                        90
                    ]
                }] 
            };
            var myRadarChart = new Chart(ctx, {
            type: 'radar',
            data: data,
            options: {
                scale: {
                    responsive: true,
                    ticks: {min: 0, max: 100},
                    ineArc: false,
                    pointLabels: {fontSize: 14},
                },
            scaleFontSize: 0,
            legend: {display: true},
            }
        });

        // The updateChart function takes an event, checks which array index of the data values needs updating, updates the value, then refreshes the chart.
        function updateChart(event) {
            dataPoint = parseInt(this.value);
            switch (this.name) {
                case 'awareness':
                    myRadarChart.data.datasets[0].data[0] = dataPoint;
                    // addData(myRadarChart, this.name, dataPoint);
                    myRadarChart.update();
                    break;
                default:
                    break;
            }
        };
        
        // Add an event listener for each "awareness" radio button. If it changes then the updateChart function is fired off.
        [...awarenessChoices].forEach(option => {
            option.addEventListener('change', updateChart);
        });
        </script>
    </body>
</html>